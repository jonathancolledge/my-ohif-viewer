{"version":3,"file":"2018.bundle.89d0601536ed410555a2.js","mappings":"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","sources":["webpack:///../../../modes/segmentation/src/id.js","webpack:///../../../modes/segmentation/src/constants.ts","webpack:///../../../modes/segmentation/src/toolbarButtons.ts","webpack:///../../../modes/segmentation/src/initToolGroups.ts","webpack:///../../../modes/segmentation/src/index.tsx","webpack:///../../../modes/segmentation/src/utils/setUpAutoTabSwitchHandler.ts"],"sourcesContent":["import packageJson from '../package.json';\r\n\r\nconst id = packageJson.name;\r\n\r\nexport { id };\r\n","export const MIN_SEGMENTATION_DRAWING_RADIUS = 0.5;\r\nexport const MAX_SEGMENTATION_DRAWING_RADIUS = 99.5;\r\n","import type { Button } from '@ohif/core/types';\r\nimport { ViewportGridService } from '@ohif/core';\r\nimport i18n from 'i18next';\r\n\r\nimport { MIN_SEGMENTATION_DRAWING_RADIUS, MAX_SEGMENTATION_DRAWING_RADIUS } from './constants';\r\n\r\nconst setToolActiveToolbar = {\r\n  commandName: 'setToolActiveToolbar',\r\n  commandOptions: {\r\n    toolGroupIds: ['default', 'mpr', 'SRToolGroup', 'volume3d'],\r\n  },\r\n};\r\n\r\nconst callbacks = (toolName: string) => [\r\n  {\r\n    commandName: 'setViewportForToolConfiguration',\r\n    commandOptions: {\r\n      toolName,\r\n    },\r\n  },\r\n];\r\n\r\nexport const toolbarButtons: Button[] = [\r\n  {\r\n    id: 'AdvancedRenderingControls',\r\n    uiType: 'ohif.advancedRenderingControls',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  {\r\n    id: 'modalityLoadBadge',\r\n    uiType: 'ohif.modalityLoadBadge',\r\n    props: {\r\n      icon: 'Status',\r\n      label: i18n.t('Buttons:Status'),\r\n      tooltip: i18n.t('Buttons:Status'),\r\n      evaluate: {\r\n        name: 'evaluate.modalityLoadBadge',\r\n        hideWhenDisabled: true,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'navigationComponent',\r\n    uiType: 'ohif.navigationComponent',\r\n    props: {\r\n      icon: 'Navigation',\r\n      label: i18n.t('Buttons:Navigation'),\r\n      tooltip: i18n.t('Buttons:Navigate between segments/measurements and manage their visibility'),\r\n      evaluate: {\r\n        name: 'evaluate.navigationComponent',\r\n        hideWhenDisabled: true,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'trackingStatus',\r\n    uiType: 'ohif.trackingStatus',\r\n    props: {\r\n      icon: 'TrackingStatus',\r\n      label: i18n.t('Buttons:Tracking Status'),\r\n      tooltip: i18n.t('Buttons:View and manage tracking status of measurements and annotations'),\r\n      evaluate: {\r\n        name: 'evaluate.trackingStatus',\r\n        hideWhenDisabled: true,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'dataOverlayMenu',\r\n    uiType: 'ohif.dataOverlayMenu',\r\n    props: {\r\n      icon: 'ViewportViews',\r\n      label: i18n.t('Buttons:Data Overlay'),\r\n      tooltip: i18n.t(\r\n        'Buttons:Configure data overlay options and manage foreground/background display sets'\r\n      ),\r\n      evaluate: 'evaluate.dataOverlayMenu',\r\n    },\r\n  },\r\n  {\r\n    id: 'orientationMenu',\r\n    uiType: 'ohif.orientationMenu',\r\n    props: {\r\n      icon: 'OrientationSwitch',\r\n      label: i18n.t('Buttons:Orientation'),\r\n      tooltip: i18n.t(\r\n        'Buttons:Change viewport orientation between axial, sagittal, coronal and reformat planes'\r\n      ),\r\n      evaluate: {\r\n        name: 'evaluate.orientationMenu',\r\n        // hideWhenDisabled: true,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'windowLevelMenuEmbedded',\r\n    uiType: 'ohif.windowLevelMenuEmbedded',\r\n    props: {\r\n      icon: 'WindowLevel',\r\n      label: i18n.t('Buttons:Window Level'),\r\n      tooltip: i18n.t('Buttons:Adjust window/level presets and customize image contrast settings'),\r\n      evaluate: {\r\n        name: 'evaluate.windowLevelMenuEmbedded',\r\n        hideWhenDisabled: true,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'windowLevelMenu',\r\n    uiType: 'ohif.windowLevelMenu',\r\n    props: {\r\n      icon: 'WindowLevel',\r\n      label: i18n.t('Buttons:Window Level'),\r\n      tooltip: i18n.t('Buttons:Adjust window/level presets and customize image contrast settings'),\r\n      evaluate: 'evaluate.windowLevelMenu',\r\n    },\r\n  },\r\n  {\r\n    id: 'voiManualControlMenu',\r\n    uiType: 'ohif.voiManualControlMenu',\r\n    props: {\r\n      icon: 'WindowLevelAdvanced',\r\n      label: i18n.t('Buttons:Advanced Window Level'),\r\n      tooltip: i18n.t('Buttons:Advanced window/level settings with manual controls and presets'),\r\n      evaluate: 'evaluate.voiManualControlMenu',\r\n    },\r\n  },\r\n  {\r\n    id: 'thresholdMenu',\r\n    uiType: 'ohif.thresholdMenu',\r\n    props: {\r\n      icon: 'Threshold',\r\n      label: i18n.t('Buttons:Threshold'),\r\n      tooltip: i18n.t('Buttons:Image threshold settings'),\r\n      evaluate: {\r\n        name: 'evaluate.thresholdMenu',\r\n        hideWhenDisabled: true,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'opacityMenu',\r\n    uiType: 'ohif.opacityMenu',\r\n    props: {\r\n      icon: 'Opacity',\r\n      label: i18n.t('Buttons:Opacity'),\r\n      tooltip: i18n.t('Buttons:Image opacity settings'),\r\n      evaluate: {\r\n        name: 'evaluate.opacityMenu',\r\n        hideWhenDisabled: true,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'Colorbar',\r\n    uiType: 'ohif.colorbar',\r\n    props: {\r\n      type: 'tool',\r\n      label: i18n.t('Buttons:Colorbar'),\r\n    },\r\n  },\r\n  // sections\r\n  {\r\n    id: 'MoreTools',\r\n    uiType: 'ohif.toolButtonList',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  {\r\n    id: 'BrushTools',\r\n    uiType: 'ohif.toolBoxButtonGroup',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  // Section containers for the nested toolboxes and toolbars.\r\n  {\r\n    id: 'LabelMapUtilities',\r\n    uiType: 'ohif.Toolbar',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  {\r\n    id: 'ContourUtilities',\r\n    uiType: 'ohif.Toolbar',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  {\r\n    id: 'LabelMapTools',\r\n    uiType: 'ohif.toolBoxButtonGroup',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  {\r\n    id: 'ContourTools',\r\n    uiType: 'ohif.toolBoxButtonGroup',\r\n    props: {\r\n      buttonSection: true,\r\n    },\r\n  },\r\n  // tool defs\r\n  {\r\n    id: 'Zoom',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-zoom',\r\n      label: i18n.t('Buttons:Zoom'),\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'WindowLevel',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-window-level',\r\n      label: i18n.t('Buttons:Window Level'),\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'Pan',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-move',\r\n      label: i18n.t('Buttons:Pan'),\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'TrackballRotate',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      type: 'tool',\r\n      icon: 'tool-3d-rotate',\r\n      label: i18n.t('Buttons:3D Rotate'),\r\n      commands: setToolActiveToolbar,\r\n      evaluate: {\r\n        name: 'evaluate.cornerstoneTool',\r\n        disabledText: i18n.t('Buttons:Select a 3D viewport to enable this tool'),\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'Capture',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-capture',\r\n      label: i18n.t('Buttons:Capture'),\r\n      commands: 'showDownloadViewportModal',\r\n      evaluate: [\r\n        'evaluate.action',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['video', 'wholeSlide'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Layout',\r\n    uiType: 'ohif.layoutSelector',\r\n    props: {\r\n      rows: 3,\r\n      columns: 4,\r\n      evaluate: 'evaluate.action',\r\n      commands: 'setViewportGridLayout',\r\n    },\r\n  },\r\n  {\r\n    id: 'Crosshairs',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-crosshair',\r\n      label: i18n.t('Buttons:Crosshairs'),\r\n      commands: {\r\n        commandName: 'setToolActiveToolbar',\r\n        commandOptions: {\r\n          toolGroupIds: ['mpr'],\r\n        },\r\n      },\r\n      evaluate: {\r\n        name: 'evaluate.cornerstoneTool',\r\n        disabledText: i18n.t('Buttons:Select an MPR viewport to enable this tool'),\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'Reset',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-reset',\r\n      label: i18n.t('Buttons:Reset View'),\r\n      tooltip: i18n.t('Buttons:Reset View'),\r\n      commands: 'resetViewport',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'rotate-right',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-rotate-right',\r\n      label: i18n.t('Buttons:Rotate Right'),\r\n      tooltip: i18n.t('Buttons:Rotate +90'),\r\n      commands: 'rotateViewportCW',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'flipHorizontal',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-flip-horizontal',\r\n      label: i18n.t('Buttons:Flip Horizontal'),\r\n      tooltip: i18n.t('Buttons:Flip Horizontally'),\r\n      commands: 'flipViewportHorizontal',\r\n      evaluate: [\r\n        'evaluate.viewportProperties.toggle',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['volume3d'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'ReferenceLines',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-referenceLines',\r\n      label: i18n.t('Buttons:Reference Lines'),\r\n      tooltip: i18n.t('Buttons:Show Reference Lines'),\r\n      commands: 'toggleEnabledDisabledToolbar',\r\n      evaluate: 'evaluate.cornerstoneTool.toggle',\r\n    },\r\n  },\r\n  {\r\n    id: 'ImageOverlayViewer',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'toggle-dicom-overlay',\r\n      label: i18n.t('Buttons:Image Overlay'),\r\n      tooltip: i18n.t('Buttons:Toggle Image Overlay'),\r\n      commands: 'toggleEnabledDisabledToolbar',\r\n      evaluate: 'evaluate.cornerstoneTool.toggle',\r\n    },\r\n  },\r\n  {\r\n    id: 'StackScroll',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-stack-scroll',\r\n      label: i18n.t('Buttons:Stack Scroll'),\r\n      tooltip: i18n.t('Buttons:Stack Scroll'),\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'invert',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-invert',\r\n      label: i18n.t('Buttons:Invert'),\r\n      tooltip: i18n.t('Buttons:Invert Colors'),\r\n      commands: 'invertViewport',\r\n      evaluate: 'evaluate.viewportProperties.toggle',\r\n    },\r\n  },\r\n  {\r\n    id: 'Cine',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-cine',\r\n      label: i18n.t('Buttons:Cine'),\r\n      tooltip: i18n.t('Buttons:Cine'),\r\n      commands: 'toggleCine',\r\n      evaluate: [\r\n        'evaluate.cine',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['volume3d'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Magnify',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-magnify',\r\n      label: i18n.t('Buttons:Zoom-in'),\r\n      tooltip: i18n.t('Buttons:Zoom-in'),\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'TagBrowser',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'dicom-tag-browser',\r\n      label: i18n.t('Buttons:Dicom Tag Browser'),\r\n      tooltip: i18n.t('Buttons:Dicom Tag Browser'),\r\n      commands: 'openDICOMTagViewer',\r\n    },\r\n  },\r\n  {\r\n    id: 'PlanarFreehandContourSegmentationTool',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-freehand-roi',\r\n      label: 'Freehand Segmentation',\r\n      tooltip: 'Freehand Segmentation',\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['PlanarFreehandContourSegmentationTool'],\r\n          disabledText: 'Create new segmentation to enable this tool.',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Contour',\r\n        },\r\n      ],\r\n      commands: [\r\n        {\r\n          commandName: 'setToolActiveToolbar',\r\n          commandOptions: {\r\n            bindings: [\r\n              {\r\n                mouseButton: 1, // Left Click\r\n              },\r\n              {\r\n                mouseButton: 1, // Left Click+Shift to create a hole\r\n                modifierKey: 16, // Shift\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Contour',\r\n          },\r\n        },\r\n      ],\r\n      options: [\r\n        {\r\n          name: 'Interpolate Contours',\r\n          type: 'switch',\r\n          id: 'planarFreehandInterpolateContours',\r\n          value: false,\r\n          commands: {\r\n            commandName: 'setInterpolationToolConfiguration',\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'LivewireContourSegmentationTool',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-livewire',\r\n      label: 'Livewire Contour',\r\n      tooltip: 'Livewire Contour',\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['LivewireContourSegmentationTool'],\r\n          disabledText: 'Create new segmentation to enable this tool.',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Contour',\r\n        },\r\n      ],\r\n      commands: [\r\n        {\r\n          commandName: 'setToolActiveToolbar',\r\n          commandOptions: {\r\n            bindings: [\r\n              {\r\n                mouseButton: 1, // Left Click\r\n              },\r\n              {\r\n                mouseButton: 1, // Left Click+Shift to create a hole\r\n                modifierKey: 16, // Shift\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Contour',\r\n          },\r\n        },\r\n      ],\r\n      options: [\r\n        {\r\n          name: 'Interpolate Contours',\r\n          type: 'switch',\r\n          id: 'livewireInterpolateContours',\r\n          value: false,\r\n          commands: {\r\n            commandName: 'setInterpolationToolConfiguration',\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'SplineContourSegmentationTool',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-spline-roi',\r\n      label: 'Spline Contour Segmentation Tool',\r\n      tooltip: 'Spline Contour Segmentation Tool',\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['CatmullRomSplineROI', 'LinearSplineROI', 'BSplineROI'],\r\n          disabledText: 'Create new segmentation to enable this tool.',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Contour',\r\n        },\r\n      ],\r\n      commands: [\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Contour',\r\n          },\r\n        },\r\n      ],\r\n      options: [\r\n        {\r\n          name: 'Spline Type',\r\n          type: 'select',\r\n          id: 'splineTypeSelect',\r\n          value: 'CatmullRomSplineROI',\r\n          values: [\r\n            {\r\n              id: 'CatmullRomSplineROI',\r\n              value: 'CatmullRomSplineROI',\r\n              label: 'Catmull Rom Spline',\r\n            },\r\n            { id: 'LinearSplineROI', value: 'LinearSplineROI', label: 'Linear Spline' },\r\n            { id: 'BSplineROI', value: 'BSplineROI', label: 'B-Spline' },\r\n          ],\r\n          commands: {\r\n            commandName: 'setToolActiveToolbar',\r\n            commandOptions: {\r\n              bindings: [\r\n                {\r\n                  mouseButton: 1, // Left Click\r\n                },\r\n                {\r\n                  mouseButton: 1, // Left Click+Shift to create a hole\r\n                  modifierKey: 16, // Shift\r\n                },\r\n              ],\r\n            },\r\n          },\r\n        },\r\n        {\r\n          name: 'Simplified Spline',\r\n          type: 'switch',\r\n          id: 'simplifiedSpline',\r\n          value: true,\r\n          commands: {\r\n            commandName: 'setSimplifiedSplineForSplineContourSegmentationTool',\r\n          },\r\n        },\r\n        {\r\n          name: 'Interpolate Contours',\r\n          type: 'switch',\r\n          id: 'splineInterpolateContours',\r\n          value: false,\r\n          commands: {\r\n            commandName: 'setInterpolationToolConfiguration',\r\n            commandOptions: {\r\n              toolNames: ['CatmullRomSplineROI', 'LinearSplineROI', 'BSplineROI'],\r\n            },\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'SculptorTool',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-sculptor',\r\n      label: 'Sculptor Tool',\r\n      tooltip: 'Sculptor Tool',\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['SculptorTool'],\r\n          disabledText: 'Create new segmentation to enable this tool.',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Contour',\r\n        },\r\n      ],\r\n      commands: [\r\n        'setToolActiveToolbar',\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Contour',\r\n          },\r\n        },\r\n      ],\r\n      options: [\r\n        {\r\n          name: 'Dynamic Cursor Size',\r\n          type: 'switch',\r\n          id: 'dynamicCursorSize',\r\n          value: true,\r\n          commands: {\r\n            commandName: 'setDynamicCursorSizeForSculptorTool',\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Brush',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-brush',\r\n      label: i18n.t('Buttons:Brush'),\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['CircularBrush', 'SphereBrush'],\r\n          disabledText: i18n.t('Buttons:Create new segmentation to enable this tool.'),\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation.synchronizeDrawingRadius',\r\n          radiusOptionId: 'brush-radius',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      commands: {\r\n        commandName: 'activateSelectedSegmentationOfType',\r\n        commandOptions: {\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Radius (mm)',\r\n          id: 'brush-radius',\r\n          type: 'range',\r\n          explicitRunOnly: true,\r\n          min: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          max: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n          step: 0.5,\r\n          value: 25,\r\n          commands: [\r\n            {\r\n              commandName: 'setBrushSize',\r\n              commandOptions: { toolNames: ['CircularBrush', 'SphereBrush'] },\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          id: 'brush-mode',\r\n          value: 'CircularBrush',\r\n          values: [\r\n            { value: 'CircularBrush', label: 'Circle' },\r\n            { value: 'SphereBrush', label: 'Sphere' },\r\n          ],\r\n          commands: ['setToolActiveToolbar'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'InterpolateLabelmap',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'actions-interpolate',\r\n      label: i18n.t('Buttons:Interpolate Labelmap'),\r\n      tooltip: i18n.t(\r\n        'Buttons:Automatically fill in missing slices between drawn segments. Use brush or threshold tools on at least two slices, then click to interpolate across slices. Works in any direction. Volume must be reconstructable.'\r\n      ),\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n        {\r\n          name: 'evaluate.displaySetIsReconstructable',\r\n          disabledText: i18n.t('Buttons:The current viewport cannot handle interpolation.'),\r\n        },\r\n      ],\r\n      commands: [\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Labelmap',\r\n          },\r\n        },\r\n        'interpolateLabelmap',\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'SegmentBidirectional',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'actions-bidirectional',\r\n      label: i18n.t('Buttons:Segment Bidirectional'),\r\n      tooltip: i18n.t(\r\n        'Buttons:Automatically detects the largest length and width across slices for the selected segment and displays a bidirectional measurement.'\r\n      ),\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          disabledText: i18n.t('Buttons:Create new segmentation to enable this tool.'),\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      commands: [\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Labelmap',\r\n          },\r\n        },\r\n        'runSegmentBidirectional',\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'RegionSegmentPlus',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-click-segment',\r\n      label: i18n.t('Buttons:One Click Segment'),\r\n      tooltip: i18n.t(\r\n        'Buttons:Detects segmentable regions with one click. Hover for visual feedbackâ€”click when a plus sign appears to auto-segment the lesion.'\r\n      ),\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['RegionSegmentPlus'],\r\n          disabledText: i18n.t('Buttons:Create new segmentation to enable this tool.'),\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      commands: [\r\n        'setToolActiveToolbar',\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Labelmap',\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'LabelmapSlicePropagation',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-labelmap-slice-propagation',\r\n      label: i18n.t('Buttons:Labelmap Assist'),\r\n      tooltip: i18n.t(\r\n        'Buttons:Toggle AI assistance for segmenting nearby slices. After drawing on a slice, scroll to preview predictions. Press Enter to accept or Esc to skip.'\r\n      ),\r\n      evaluate: [\r\n        'evaluate.cornerstoneTool.toggle',\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      listeners: {\r\n        [ViewportGridService.EVENTS.ACTIVE_VIEWPORT_ID_CHANGED]: callbacks(\r\n          'LabelmapSlicePropagation'\r\n        ),\r\n        [ViewportGridService.EVENTS.VIEWPORTS_READY]: callbacks('LabelmapSlicePropagation'),\r\n      },\r\n      commands: [\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Labelmap',\r\n          },\r\n        },\r\n        'toggleEnabledDisabledToolbar',\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'MarkerLabelmap',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-marker-labelmap',\r\n      label: i18n.t('Buttons:Marker Guided Labelmap'),\r\n      tooltip: i18n.t(\r\n        'Buttons:Use include/exclude markers to guide AI (SAM) segmentation. Click to place markers, Enter to accept results, Esc to reject, and N to go to the next slice while keeping markers.'\r\n      ),\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['MarkerLabelmap', 'MarkerInclude', 'MarkerExclude'],\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      commands: [\r\n        'setToolActiveToolbar',\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: {\r\n            segmentationRepresentationType: 'Labelmap',\r\n          },\r\n        },\r\n      ],\r\n      listeners: {\r\n        [ViewportGridService.EVENTS.ACTIVE_VIEWPORT_ID_CHANGED]: callbacks('MarkerLabelmap'),\r\n        [ViewportGridService.EVENTS.VIEWPORTS_READY]: callbacks('MarkerLabelmap'),\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Marker Mode',\r\n          type: 'radio',\r\n          id: 'marker-mode',\r\n          value: 'markerInclude',\r\n          values: [\r\n            { value: 'markerInclude', label: 'Include' },\r\n            { value: 'markerExclude', label: 'Exclude' },\r\n          ],\r\n          commands: ({ commandsManager, options }) => {\r\n            const markerModeOption = options.find(option => option.id === 'marker-mode');\r\n            if (markerModeOption.value === 'markerInclude') {\r\n              commandsManager.run('setToolActive', {\r\n                toolName: 'MarkerInclude',\r\n              });\r\n            } else {\r\n              commandsManager.run('setToolActive', {\r\n                toolName: 'MarkerExclude',\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          name: 'Clear Markers',\r\n          type: 'button',\r\n          id: 'clear-markers',\r\n          commands: 'clearMarkersForMarkerLabelmap',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Eraser',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-eraser',\r\n      label: i18n.t('Buttons:Eraser'),\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['CircularEraser', 'SphereEraser'],\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation.synchronizeDrawingRadius',\r\n          radiusOptionId: 'eraser-radius',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      options: [\r\n        {\r\n          name: 'Radius (mm)',\r\n          id: 'eraser-radius',\r\n          type: 'range',\r\n          explicitRunOnly: true,\r\n          min: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          max: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n          step: 0.5,\r\n          value: 25,\r\n          commands: {\r\n            commandName: 'setBrushSize',\r\n            commandOptions: { toolNames: ['CircularEraser', 'SphereEraser'] },\r\n          },\r\n        },\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          id: 'eraser-mode',\r\n          value: 'CircularEraser',\r\n          values: [\r\n            { value: 'CircularEraser', label: 'Circle' },\r\n            { value: 'SphereEraser', label: 'Sphere' },\r\n          ],\r\n          commands: 'setToolActiveToolbar',\r\n        },\r\n      ],\r\n      commands: {\r\n        commandName: 'activateSelectedSegmentationOfType',\r\n        commandOptions: {\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'Threshold',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-threshold',\r\n      label: 'Threshold Tool',\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: [\r\n            'ThresholdCircularBrush',\r\n            'ThresholdSphereBrush',\r\n            'ThresholdCircularBrushDynamic',\r\n            'ThresholdSphereBrushDynamic',\r\n          ],\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation.synchronizeDrawingRadius',\r\n          radiusOptionId: 'threshold-radius',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      commands: {\r\n        commandName: 'activateSelectedSegmentationOfType',\r\n        commandOptions: {\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Radius (mm)',\r\n          id: 'threshold-radius',\r\n          type: 'range',\r\n          explicitRunOnly: true,\r\n          min: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          max: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n          step: 0.5,\r\n          value: 25,\r\n          commands: {\r\n            commandName: 'setBrushSize',\r\n            commandOptions: {\r\n              toolNames: [\r\n                'ThresholdCircularBrush',\r\n                'ThresholdSphereBrush',\r\n                'ThresholdCircularBrushDynamic',\r\n                'ThresholdSphereBrushDynamic',\r\n              ],\r\n            },\r\n          },\r\n        },\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          id: 'threshold-shape',\r\n          value: 'ThresholdCircularBrush',\r\n          values: [\r\n            { value: 'ThresholdCircularBrush', label: 'Circle' },\r\n            { value: 'ThresholdSphereBrush', label: 'Sphere' },\r\n          ],\r\n          commands: ({ value, commandsManager, options }) => {\r\n            const optionsDynamic = options.find(option => option.id === 'dynamic-mode');\r\n\r\n            if (optionsDynamic.value === 'ThresholdDynamic') {\r\n              commandsManager.run('setToolActive', {\r\n                toolName:\r\n                  value === 'ThresholdCircularBrush'\r\n                    ? 'ThresholdCircularBrushDynamic'\r\n                    : 'ThresholdSphereBrushDynamic',\r\n              });\r\n            } else {\r\n              commandsManager.run('setToolActive', {\r\n                toolName: value,\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          name: 'Threshold',\r\n          type: 'radio',\r\n          id: 'dynamic-mode',\r\n          value: 'ThresholdDynamic',\r\n          values: [\r\n            { value: 'ThresholdDynamic', label: 'Dynamic' },\r\n            { value: 'ThresholdRange', label: 'Range' },\r\n          ],\r\n          commands: ({ value, commandsManager, options }) => {\r\n            const thresholdRangeOption = options.find(option => option.id === 'threshold-shape');\r\n\r\n            if (value === 'ThresholdDynamic') {\r\n              commandsManager.run('setToolActiveToolbar', {\r\n                toolName:\r\n                  thresholdRangeOption.value === 'ThresholdCircularBrush'\r\n                    ? 'ThresholdCircularBrushDynamic'\r\n                    : 'ThresholdSphereBrushDynamic',\r\n              });\r\n            } else {\r\n              commandsManager.run('setToolActiveToolbar', {\r\n                toolName: thresholdRangeOption.value,\r\n              });\r\n\r\n              const thresholdRangeValue = options.find(\r\n                option => option.id === 'threshold-range'\r\n              ).value;\r\n\r\n              commandsManager.run('setThresholdRange', {\r\n                toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\r\n                value: thresholdRangeValue,\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          name: 'ThresholdRange',\r\n          type: 'double-range',\r\n          id: 'threshold-range',\r\n          min: -1000,\r\n          max: 1000,\r\n          step: 1,\r\n          value: [50, 600],\r\n          condition: ({ options }) =>\r\n            options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\r\n          commands: {\r\n            commandName: 'setThresholdRange',\r\n            commandOptions: {\r\n              toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\r\n            },\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Shapes',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-shape',\r\n      label: i18n.t('Buttons:Shapes'),\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['CircleScissor', 'SphereScissor', 'RectangleScissor'],\r\n          disabledText: i18n.t('Buttons:Create new segmentation to enable shapes tool.'),\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n      commands: {\r\n        commandName: 'activateSelectedSegmentationOfType',\r\n        commandOptions: {\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          value: 'CircleScissor',\r\n          id: 'shape-mode',\r\n          values: [\r\n            { value: 'CircleScissor', label: 'Circle' },\r\n            { value: 'SphereScissor', label: 'Sphere' },\r\n            { value: 'RectangleScissor', label: 'Rectangle' },\r\n          ],\r\n          commands: 'setToolActiveToolbar',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'SimplifyContours',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'actions-simplify',\r\n      label: 'Simplify Contours',\r\n      tooltip: 'Simplify Contours',\r\n      commands: ['toggleActiveSegmentationUtility'],\r\n      evaluate: [\r\n        {\r\n          name: 'cornerstone.isActiveSegmentationUtility',\r\n        },\r\n      ],\r\n      options: 'cornerstone.SimplifyContourOptions',\r\n    },\r\n  },\r\n  {\r\n    id: 'SmoothContours',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'actions-smooth',\r\n      label: 'Smooth Contours',\r\n      tooltip: 'Smooth Contours',\r\n      commands: ['toggleActiveSegmentationUtility'],\r\n      evaluate: [\r\n        {\r\n          name: 'cornerstone.isActiveSegmentationUtility',\r\n        },\r\n      ],\r\n      options: 'cornerstone.SmoothContoursOptions',\r\n    },\r\n  },\r\n  {\r\n    id: 'LogicalContourOperations',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'actions-combine',\r\n      label: 'Combine Contours',\r\n      tooltip: 'Combine Contours',\r\n      commands: ['toggleActiveSegmentationUtility'],\r\n      evaluate: [\r\n        {\r\n          name: 'cornerstone.isActiveSegmentationUtility',\r\n        },\r\n      ],\r\n      options: 'cornerstone.LogicalContourOperationsOptions',\r\n    },\r\n  },\r\n  {\r\n    id: 'LabelMapEditWithContour',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'tool-labelmap-edit-with-contour',\r\n      label: 'Labelmap Edit with Contour Tool',\r\n      tooltip: 'Labelmap Edit with Contour Tool',\r\n      commands: [\r\n        'setToolActiveToolbar',\r\n        {\r\n          commandName: 'activateSelectedSegmentationOfType',\r\n          commandOptions: { segmentationRepresentationType: 'Labelmap' },\r\n        },\r\n      ],\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['LabelMapEditWithContour'],\r\n          disabledText: 'Create new segmentation to enable this tool.',\r\n        },\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentationOfType',\r\n          segmentationRepresentationType: 'Labelmap',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n];\r\n\r\nexport default toolbarButtons;\r\n","import { MIN_SEGMENTATION_DRAWING_RADIUS, MAX_SEGMENTATION_DRAWING_RADIUS } from './constants';\r\n\r\nconst colours = {\r\n  'viewport-0': 'rgb(200, 0, 0)',\r\n  'viewport-1': 'rgb(200, 200, 0)',\r\n  'viewport-2': 'rgb(0, 200, 0)',\r\n};\r\n\r\nconst colorsByOrientation = {\r\n  axial: 'rgb(200, 0, 0)',\r\n  sagittal: 'rgb(200, 200, 0)',\r\n  coronal: 'rgb(0, 200, 0)',\r\n};\r\n\r\nfunction createTools({ utilityModule, commandsManager }) {\r\n  const { toolNames, Enums } = utilityModule.exports;\r\n\r\n  const tools = {\r\n    active: [\r\n      { toolName: toolNames.WindowLevel, bindings: [{ mouseButton: Enums.MouseBindings.Primary }] },\r\n      { toolName: toolNames.Pan, bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }] },\r\n      {\r\n        toolName: toolNames.Zoom,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }, { numTouchPoints: 2 }],\r\n      },\r\n      {\r\n        toolName: toolNames.StackScroll,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Wheel }, { numTouchPoints: 3 }],\r\n      },\r\n    ],\r\n    passive: [\r\n      {\r\n        toolName: 'CircularBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'FILL_INSIDE_CIRCLE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n        },\r\n      },\r\n      {\r\n        toolName: toolNames.LabelmapSlicePropagation,\r\n      },\r\n      {\r\n        toolName: toolNames.MarkerLabelmap,\r\n      },\r\n      {\r\n        toolName: toolNames.RegionSegmentPlus,\r\n      },\r\n      {\r\n        toolName: 'CircularEraser',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'ERASE_INSIDE_CIRCLE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n        },\r\n      },\r\n      {\r\n        toolName: 'SphereBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'FILL_INSIDE_SPHERE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n        },\r\n      },\r\n      {\r\n        toolName: 'SphereEraser',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'ERASE_INSIDE_SPHERE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdCircularBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdSphereBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdCircularBrushDynamic',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n          threshold: {\r\n            isDynamic: true,\r\n            dynamicRadius: 3,\r\n          },\r\n        },\r\n      },\r\n      {\r\n        toolName: toolNames.SegmentBidirectional,\r\n      },\r\n      {\r\n        toolName: toolNames.SegmentSelect,\r\n      },\r\n      {\r\n        toolName: 'ThresholdSphereBrushDynamic',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\r\n          minRadius: MIN_SEGMENTATION_DRAWING_RADIUS,\r\n          maxRadius: MAX_SEGMENTATION_DRAWING_RADIUS,\r\n          threshold: {\r\n            isDynamic: true,\r\n            dynamicRadius: 3,\r\n          },\r\n        },\r\n      },\r\n      {\r\n        toolName: toolNames.LabelMapEditWithContourTool,\r\n      },\r\n      { toolName: toolNames.CircleScissors },\r\n      { toolName: toolNames.RectangleScissors },\r\n      { toolName: toolNames.SphereScissors },\r\n      { toolName: toolNames.StackScroll },\r\n      { toolName: toolNames.Magnify },\r\n      { toolName: toolNames.WindowLevelRegion },\r\n\r\n      { toolName: toolNames.UltrasoundDirectional },\r\n      {\r\n        toolName: toolNames.PlanarFreehandContourSegmentation,\r\n      },\r\n      { toolName: toolNames.LivewireContourSegmentation },\r\n      { toolName: toolNames.SculptorTool },\r\n      { toolName: toolNames.PlanarFreehandROI },\r\n      {\r\n        toolName: 'CatmullRomSplineROI',\r\n        parentTool: toolNames.SplineContourSegmentation,\r\n        configuration: {\r\n          spline: {\r\n            type: 'CATMULLROM',\r\n            enableTwoPointPreview: true,\r\n          },\r\n        },\r\n      },\r\n      {\r\n        toolName: 'LinearSplineROI',\r\n        parentTool: toolNames.SplineContourSegmentation,\r\n        configuration: {\r\n          spline: {\r\n            type: 'LINEAR',\r\n            enableTwoPointPreview: true,\r\n          },\r\n        },\r\n      },\r\n      {\r\n        toolName: 'BSplineROI',\r\n        parentTool: toolNames.SplineContourSegmentation,\r\n        configuration: {\r\n          spline: {\r\n            type: 'BSPLINE',\r\n            enableTwoPointPreview: true,\r\n          },\r\n        },\r\n      },\r\n    ],\r\n    disabled: [{ toolName: toolNames.ReferenceLines }, { toolName: toolNames.AdvancedMagnify }],\r\n  };\r\n\r\n  const updatedTools = commandsManager.run('initializeSegmentLabelTool', { tools });\r\n\r\n  return updatedTools;\r\n}\r\n\r\nfunction initDefaultToolGroup(extensionManager, toolGroupService, commandsManager, toolGroupId) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n  const tools = createTools({ commandsManager, utilityModule });\r\n  toolGroupService.createToolGroupAndAddTools(toolGroupId, tools);\r\n}\r\n\r\nfunction initMPRToolGroup(extensionManager, toolGroupService, commandsManager) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n  const servicesManager = extensionManager._servicesManager;\r\n  const { cornerstoneViewportService } = servicesManager.services;\r\n  const tools = createTools({ commandsManager, utilityModule });\r\n  tools.disabled.push(\r\n    {\r\n      toolName: utilityModule.exports.toolNames.Crosshairs,\r\n      configuration: {\r\n        viewportIndicators: true,\r\n        viewportIndicatorsConfig: {\r\n          circleRadius: 5,\r\n          xOffset: 0.95,\r\n          yOffset: 0.05,\r\n        },\r\n        disableOnPassive: true,\r\n        autoPan: {\r\n          enabled: false,\r\n          panSize: 10,\r\n        },\r\n        getReferenceLineColor: viewportId => {\r\n          const viewportInfo = cornerstoneViewportService.getViewportInfo(viewportId);\r\n          const viewportOptions = viewportInfo?.viewportOptions;\r\n          if (viewportOptions) {\r\n            return (\r\n              colours[viewportOptions.id] ||\r\n              colorsByOrientation[viewportOptions.orientation] ||\r\n              '#0c0'\r\n            );\r\n          } else {\r\n            console.warn('missing viewport?', viewportId);\r\n            return '#0c0';\r\n          }\r\n        },\r\n      },\r\n    },\r\n    { toolName: utilityModule.exports.toolNames.ReferenceLines }\r\n  );\r\n  toolGroupService.createToolGroupAndAddTools('mpr', tools);\r\n}\r\n\r\nfunction initVolume3DToolGroup(extensionManager, toolGroupService) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n\r\n  const { toolNames, Enums } = utilityModule.exports;\r\n\r\n  const tools = {\r\n    active: [\r\n      {\r\n        toolName: toolNames.TrackballRotateTool,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Zoom,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }, { numTouchPoints: 2 }],\r\n      },\r\n      {\r\n        toolName: toolNames.Pan,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\r\n      },\r\n    ],\r\n  };\r\n\r\n  toolGroupService.createToolGroupAndAddTools('volume3d', tools);\r\n}\r\n\r\nfunction initToolGroups(extensionManager, toolGroupService, commandsManager) {\r\n  initDefaultToolGroup(extensionManager, toolGroupService, commandsManager, 'default');\r\n  initMPRToolGroup(extensionManager, toolGroupService, commandsManager);\r\n  initVolume3DToolGroup(extensionManager, toolGroupService);\r\n}\r\n\r\nexport default initToolGroups;\r\n","import { id } from './id';\r\nimport toolbarButtons from './toolbarButtons';\r\nimport initToolGroups from './initToolGroups';\r\nimport setUpAutoTabSwitchHandler from './utils/setUpAutoTabSwitchHandler';\r\nimport { ohif, cornerstone, extensionDependencies, dicomRT, segmentation } from '@ohif/mode-basic';\r\nexport * from './toolbarButtons';\r\n\r\nfunction modeFactory({ modeConfiguration }) {\r\n  const _unsubscriptions = [];\r\n  return {\r\n    /**\r\n     * Mode ID, which should be unique among modes used by the viewer. This ID\r\n     * is used to identify the mode in the viewer's state.\r\n     */\r\n    id,\r\n    routeName: 'segmentation',\r\n    /**\r\n     * Mode name, which is displayed in the viewer's UI in the workList, for the\r\n     * user to select the mode.\r\n     */\r\n    displayName: 'Segmentation',\r\n    /**\r\n     * Runs when the Mode Route is mounted to the DOM. Usually used to initialize\r\n     * Services and other resources.\r\n     */\r\n    onModeEnter: ({ servicesManager, extensionManager, commandsManager }: withAppTypes) => {\r\n      const {\r\n        measurementService,\r\n        toolbarService,\r\n        toolGroupService,\r\n        segmentationService,\r\n        viewportGridService,\r\n        panelService,\r\n      } = servicesManager.services;\r\n\r\n      measurementService.clearMeasurements();\r\n\r\n      // Init Default and SR ToolGroups\r\n      initToolGroups(extensionManager, toolGroupService, commandsManager);\r\n\r\n      toolbarService.register(toolbarButtons);\r\n\r\n      toolbarService.updateSection(toolbarService.sections.primary, [\r\n        'WindowLevel',\r\n        'Pan',\r\n        'Zoom',\r\n        'TrackballRotate',\r\n        'Capture',\r\n        'Layout',\r\n        'Crosshairs',\r\n        'MoreTools',\r\n      ]);\r\n\r\n      toolbarService.updateSection(toolbarService.sections.viewportActionMenu.topLeft, [\r\n        'orientationMenu',\r\n        'dataOverlayMenu',\r\n      ]);\r\n\r\n      toolbarService.updateSection(toolbarService.sections.viewportActionMenu.bottomMiddle, [\r\n        'AdvancedRenderingControls',\r\n      ]);\r\n\r\n      toolbarService.updateSection('AdvancedRenderingControls', [\r\n        'windowLevelMenuEmbedded',\r\n        'voiManualControlMenu',\r\n        'Colorbar',\r\n        'opacityMenu',\r\n        'thresholdMenu',\r\n      ]);\r\n\r\n      toolbarService.updateSection(toolbarService.sections.viewportActionMenu.topRight, [\r\n        'modalityLoadBadge',\r\n        'trackingStatus',\r\n        'navigationComponent',\r\n      ]);\r\n\r\n      toolbarService.updateSection(toolbarService.sections.viewportActionMenu.bottomLeft, [\r\n        'windowLevelMenu',\r\n      ]);\r\n\r\n      toolbarService.updateSection('MoreTools', [\r\n        'Reset',\r\n        'rotate-right',\r\n        'flipHorizontal',\r\n        'ReferenceLines',\r\n        'ImageOverlayViewer',\r\n        'StackScroll',\r\n        'invert',\r\n        'Cine',\r\n        'Magnify',\r\n        'TagBrowser',\r\n      ]);\r\n\r\n      toolbarService.updateSection(toolbarService.sections.labelMapSegmentationToolbox, [\r\n        'LabelMapTools',\r\n      ]);\r\n      toolbarService.updateSection(toolbarService.sections.contourSegmentationToolbox, [\r\n        'ContourTools',\r\n      ]);\r\n\r\n      toolbarService.updateSection('LabelMapTools', [\r\n        'LabelmapSlicePropagation',\r\n        'BrushTools',\r\n        'MarkerLabelmap',\r\n        'RegionSegmentPlus',\r\n        'Shapes',\r\n        'LabelMapEditWithContour',\r\n      ]);\r\n      toolbarService.updateSection('ContourTools', [\r\n        'PlanarFreehandContourSegmentationTool',\r\n        'SculptorTool',\r\n        'SplineContourSegmentationTool',\r\n        'LivewireContourSegmentationTool',\r\n      ]);\r\n\r\n      toolbarService.updateSection(toolbarService.sections.labelMapSegmentationUtilities, [\r\n        'LabelMapUtilities',\r\n      ]);\r\n      toolbarService.updateSection(toolbarService.sections.contourSegmentationUtilities, [\r\n        'ContourUtilities',\r\n      ]);\r\n\r\n      toolbarService.updateSection('LabelMapUtilities', [\r\n        'InterpolateLabelmap',\r\n        'SegmentBidirectional',\r\n      ]);\r\n      toolbarService.updateSection('ContourUtilities', [\r\n        'LogicalContourOperations',\r\n        'SimplifyContours',\r\n        'SmoothContours',\r\n      ]);\r\n\r\n      toolbarService.updateSection('BrushTools', ['Brush', 'Eraser', 'Threshold']);\r\n\r\n      const { unsubscribeAutoTabSwitchEvents } = setUpAutoTabSwitchHandler({\r\n        segmentationService,\r\n        viewportGridService,\r\n        panelService,\r\n      });\r\n\r\n      _unsubscriptions.push(...unsubscribeAutoTabSwitchEvents);\r\n    },\r\n    onModeExit: ({ servicesManager }: withAppTypes) => {\r\n      const {\r\n        toolGroupService,\r\n        syncGroupService,\r\n        segmentationService,\r\n        cornerstoneViewportService,\r\n        uiDialogService,\r\n        uiModalService,\r\n      } = servicesManager.services;\r\n\r\n      _unsubscriptions.forEach(unsubscribe => unsubscribe());\r\n      _unsubscriptions.length = 0;\r\n\r\n      uiDialogService.hideAll();\r\n      uiModalService.hide();\r\n      toolGroupService.destroy();\r\n      syncGroupService.destroy();\r\n      segmentationService.destroy();\r\n      cornerstoneViewportService.destroy();\r\n    },\r\n    /** */\r\n    validationTags: {\r\n      study: [],\r\n      series: [],\r\n    },\r\n    /**\r\n     * A boolean return value that indicates whether the mode is valid for the\r\n     * modalities of the selected studies. Currently we don't have stack viewport\r\n     * segmentations and we should exclude them\r\n     */\r\n    isValidMode: ({ modalities }) => {\r\n      // Don't show the mode if the selected studies have only one modality\r\n      // that is not supported by the mode\r\n      const modalitiesArray = modalities.split('\\\\');\r\n      return {\r\n        valid:\r\n          modalitiesArray.length === 1\r\n            ? !['SM', 'ECG', 'OT', 'DOC'].includes(modalitiesArray[0])\r\n            : true,\r\n        description:\r\n          'The mode does not support studies that ONLY include the following modalities: SM, OT, DOC',\r\n      };\r\n    },\r\n    /**\r\n     * Mode Routes are used to define the mode's behavior. A list of Mode Route\r\n     * that includes the mode's path and the layout to be used. The layout will\r\n     * include the components that are used in the layout. For instance, if the\r\n     * default layoutTemplate is used (id: '@ohif/extension-default.layoutTemplateModule.viewerLayout')\r\n     * it will include the leftPanels, rightPanels, and viewports. However, if\r\n     * you define another layoutTemplate that includes a Footer for instance,\r\n     * you should provide the Footer component here too. Note: We use Strings\r\n     * to reference the component's ID as they are registered in the internal\r\n     * ExtensionManager. The template for the string is:\r\n     * `${extensionId}.{moduleType}.${componentId}`.\r\n     */\r\n    routes: [\r\n      {\r\n        path: 'template',\r\n        layoutTemplate: ({ location, servicesManager }) => {\r\n          return {\r\n            id: ohif.layout,\r\n            props: {\r\n              leftPanels: [ohif.thumbnailList],\r\n              leftPanelResizable: true,\r\n              rightPanels: [\r\n                cornerstone.labelMapSegmentationPanel,\r\n                cornerstone.contourSegmentationPanel,\r\n              ],\r\n              rightPanelResizable: true,\r\n              // leftPanelClosed: true,\r\n              viewports: [\r\n                {\r\n                  namespace: cornerstone.viewport,\r\n                  displaySetsToDisplay: [ohif.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: segmentation.viewport,\r\n                  displaySetsToDisplay: [segmentation.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicomRT.viewport,\r\n                  displaySetsToDisplay: [dicomRT.sopClassHandler],\r\n                },\r\n              ],\r\n            },\r\n          };\r\n        },\r\n      },\r\n    ],\r\n    /** List of extensions that are used by the mode */\r\n    extensions: extensionDependencies,\r\n    /** HangingProtocol used by the mode */\r\n    // Commented out to just use the most applicable registered hanging protocol\r\n    // The example is used for a grid layout to specify that as a preferred layout\r\n    hangingProtocol: ['@ohif/mnGrid'],\r\n    /** SopClassHandlers used by the mode */\r\n    sopClassHandlers: [ohif.sopClassHandler, segmentation.sopClassHandler, dicomRT.sopClassHandler],\r\n  };\r\n}\r\n\r\nconst mode = {\r\n  id,\r\n  modeFactory,\r\n  extensionDependencies,\r\n};\r\n\r\nexport default mode;\r\n","/**\r\n * Sets up auto tab switching for when the first segmentation is added into the viewer.\r\n */\r\nexport default function setUpAutoTabSwitchHandler({\r\n  segmentationService,\r\n  viewportGridService,\r\n  panelService,\r\n}) {\r\n  const autoTabSwitchEvents = [\r\n    segmentationService.EVENTS.SEGMENTATION_MODIFIED,\r\n    segmentationService.EVENTS.SEGMENTATION_REPRESENTATION_MODIFIED,\r\n  ];\r\n\r\n  // Initially there are no segmentations, so we should switch the tab whenever the first segmentation is added.\r\n  let shouldSwitchTab = true;\r\n\r\n  const unsubscribeAutoTabSwitchEvents = autoTabSwitchEvents\r\n    .map(eventName =>\r\n      segmentationService.subscribe(eventName, () => {\r\n        const segmentations = segmentationService.getSegmentations();\r\n\r\n        if (!segmentations.length) {\r\n          // If all the segmentations are removed, then the next time a segmentation is added, we should switch the tab.\r\n          shouldSwitchTab = true;\r\n          return;\r\n        }\r\n\r\n        const activeViewportId = viewportGridService.getActiveViewportId();\r\n        const activeRepresentation = segmentationService\r\n          .getSegmentationRepresentations(activeViewportId)\r\n          ?.find(representation => representation.active);\r\n\r\n        if (activeRepresentation && shouldSwitchTab) {\r\n          shouldSwitchTab = false;\r\n\r\n          switch (activeRepresentation.type) {\r\n            case 'Labelmap':\r\n              panelService.activatePanel(\r\n                '@ohif/extension-cornerstone.panelModule.panelSegmentationWithToolsLabelMap',\r\n                true\r\n              );\r\n              break;\r\n            case 'Contour':\r\n              panelService.activatePanel(\r\n                '@ohif/extension-cornerstone.panelModule.panelSegmentationWithToolsContour',\r\n                true\r\n              );\r\n              break;\r\n          }\r\n        }\r\n      })\r\n    )\r\n    .map(subscription => subscription.unsubscribe);\r\n\r\n  return { unsubscribeAutoTabSwitchEvents };\r\n}\r\n"],"names":["id","packageJson","MIN_SEGMENTATION_DRAWING_RADIUS","MAX_SEGMENTATION_DRAWING_RADIUS","setToolActiveToolbar","commandName","commandOptions","toolGroupIds","callbacks","toolName","toolbarButtons","uiType","props","buttonSection","icon","label","i18n","t","tooltip","evaluate","name","hideWhenDisabled","type","commands","disabledText","unsupportedViewportTypes","rows","columns","toolNames","segmentationRepresentationType","bindings","mouseButton","modifierKey","options","value","values","radiusOptionId","explicitRunOnly","min","max","step","listeners","ViewportGridService","EVENTS","ACTIVE_VIEWPORT_ID_CHANGED","VIEWPORTS_READY","commandsManager","find","option","run","thresholdRangeOption","thresholdRangeValue","condition","colours","colorsByOrientation","axial","sagittal","coronal","createTools","utilityModule","Enums","exports","tools","active","WindowLevel","MouseBindings","Primary","Pan","Auxiliary","Zoom","Secondary","numTouchPoints","StackScroll","Wheel","passive","parentTool","configuration","activeStrategy","minRadius","maxRadius","LabelmapSlicePropagation","MarkerLabelmap","RegionSegmentPlus","threshold","isDynamic","dynamicRadius","SegmentBidirectional","SegmentSelect","LabelMapEditWithContourTool","CircleScissors","RectangleScissors","SphereScissors","Magnify","WindowLevelRegion","UltrasoundDirectional","PlanarFreehandContourSegmentation","LivewireContourSegmentation","SculptorTool","PlanarFreehandROI","SplineContourSegmentation","spline","enableTwoPointPreview","disabled","ReferenceLines","AdvancedMagnify","extensionManager","toolGroupService","toolGroupId","getModuleEntry","createToolGroupAndAddTools","initDefaultToolGroup","servicesManager","_servicesManager","cornerstoneViewportService","services","push","Crosshairs","viewportIndicators","viewportIndicatorsConfig","circleRadius","xOffset","yOffset","disableOnPassive","autoPan","enabled","panSize","getReferenceLineColor","viewportId","viewportInfo","getViewportInfo","viewportOptions","orientation","console","warn","initMPRToolGroup","TrackballRotateTool","initVolume3DToolGroup","modeFactory","modeConfiguration","_unsubscriptions","routeName","displayName","onModeEnter","measurementService","toolbarService","segmentationService","viewportGridService","panelService","clearMeasurements","initToolGroups","register","updateSection","sections","primary","viewportActionMenu","topLeft","bottomMiddle","topRight","bottomLeft","labelMapSegmentationToolbox","contourSegmentationToolbox","labelMapSegmentationUtilities","contourSegmentationUtilities","unsubscribeAutoTabSwitchEvents","autoTabSwitchEvents","SEGMENTATION_MODIFIED","SEGMENTATION_REPRESENTATION_MODIFIED","shouldSwitchTab","map","eventName","subscribe","getSegmentations","length","activeViewportId","getActiveViewportId","activeRepresentation","getSegmentationRepresentations","representation","activatePanel","subscription","unsubscribe","setUpAutoTabSwitchHandler","onModeExit","syncGroupService","uiDialogService","uiModalService","forEach","hideAll","hide","destroy","validationTags","study","series","isValidMode","modalities","modalitiesArray","split","valid","includes","description","routes","path","layoutTemplate","location","ohif","layout","leftPanels","thumbnailList","leftPanelResizable","rightPanels","cornerstone","labelMapSegmentationPanel","contourSegmentationPanel","rightPanelResizable","viewports","namespace","viewport","displaySetsToDisplay","sopClassHandler","segmentation","dicomRT","extensions","extensionDependencies","hangingProtocol","sopClassHandlers"],"sourceRoot":""}